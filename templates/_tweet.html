<div>
    <div class="post_container" id="post_container_{{ tweet.post_pk }}">
        {% if tweet.post_is_blocked %}


        <div class="blocked_post_overlay">
            <p>{{ x.lans("this_post_is_blocked") }}</p>
        </div>
        {% endif %}

        <article class="post">
            <img src="{{ url_for('static', filename=(tweet.user_avatar_path.replace('static/', '') if tweet.user_avatar_path else 'images/unknown.jpg')) }}"
                alt="Profile Picture" class="w-8 h-8 rounded-full">

            <div class="post-content">
                <div class="post-header">
                    <span class="name">
                        {{ tweet.user_first_name }}
                        {% if tweet.user_last_name %}
                        {{ tweet.user_last_name }}
                        {% endif %}
                    </span>
                    <span class="handle">@{{ tweet.user_username }}</span> ·
                    <span class="time">
                        {% if tweet.post_created_at %}
                        {{ tweet.post_created_at.strftime('%b %d, %Y at %I:%M %p') }}
                        {% else %}
                        Recently
                        {% endif %}
                    </span>

                    <!-- edit knap > vises kun på brugerens egne posts -->
                    {% if user.user_pk == tweet.post_user_fk %}
                    <button class="edit-post-btn" mix-get="/edit-post/{{ tweet.post_pk }}"
                        mix-target="#post_container_{{ tweet.post_pk }}" title="Edit post">
                        <i class="fa-solid fa-pen pointer-e-none"></i>
                    </button>
                    {% endif %}
                </div>

                <p class="text">{{ tweet.post_message }}</p>

                <!-- Media display  -->
                {% if tweet.post_media_path %}
                {% set file_ext = tweet.post_media_path.split('.')[-1].lower() %}

                {% if file_ext in ['jpg', 'jpeg', 'png', 'gif', 'webp'] %}
                <!-- Display image -->
                <img src="{{ url_for('static', filename=tweet.post_media_path) }}" alt="Post image" class="post-media">

                {% elif file_ext in ['mp4', 'mov', 'webm'] %}
                <!-- Display video -->
                <video controls class="post-media">
                    <source src="{{ url_for('static', filename=tweet.post_media_path) }}" type="video/{{ file_ext }}">
                    Your browser does not support the video tag.
                </video>
                {% endif %}
                {% endif %}

                <div class="post-actions">
                    <span class="action">
                        <a href="">
                            <i class="fa-regular fa-comment"></i> 12
                        </a>
                    </span>
                    <span class="action"><i class="fa-solid fa-retweet"></i> 5</span>
                    <span class="action">
                        {% set post_pk = tweet.post_pk %}
                        {% set like_count = tweet.post_total_likes %}

                        {% if tweet.is_liked_by_user %}
                        {% include "___button_unlike_tweet.html" with context %}
                        {% else %}
                        {% include "___button_like_tweet.html" with context %}
                        {% endif %}
                    </span>
                    <span class="action"><i class="fa-solid fa-chart-simple"></i> 230</span>
                    <span class="action"><i class="fa-solid fa-share"></i></span>


                    {% if user and user.user_pk == tweet.post_user_fk %}
                    <form action="/api-delete-post/{{ tweet.post_pk }}" mix-delete style="display:inline" class="action"
                        mix-delay="3000" mix-await="{{ x.lans('deleting') }}...">
                        <button type="submit" class="action text-c-red" class="text-c-red" hover="cursor-pointer">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </form>
                    {% endif %}
                    {% if user.user_is_admin %}
                    {% if tweet.post_blocked_at %}
                    {% include "___button_unblock_post.html" %}
                    {% else %}
                    {% include "___button_block_post.html" %}
                    {% endif %}
                    {% endif %}
                </div>
            </div>
        </article>
        <div>

        </div>
    </div>
</div>